<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1" />
    <title>Foodly</title>
    <link rel="shortcut icon" href="../assets/images/favicon.ico">
    <link rel="stylesheet" href="../js/bootstrap-5.0.2-dist/css/bootstrap.min.css"/>
    <link rel="stylesheet" href="../css/homepage.css">
    <link rel="stylesheet" href="../css/managerCustomers.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;700&display=swap" rel="stylesheet">
    <script type="text/javascript" src="../js/bootstrap-5.0.1-dist/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../js/vue.js"></script>
    <script type="text/javascript" src="../js/axios.js"></script>
  </head>

  <body>
    <div id="managerCustomers">
      <!--Navigation container-->
      <div class="container-fluid navigation-container pt-3 px-0">
        <div class="container-fluid d-none d-lg-block px-0">
          <img src="../assets/images/logos/foodly-logos/full-logo.png" alt="Brand logo" id="full-logo">
        </div>
        <div class="container d-lg-none px-0">
          <img src="../assets/images/logos/foodly-logos/foodly-logo.png" alt="Brand logo" id="foodly-logo">
        </div>
        <nav class="navbar navbar-expand-lg navbar-light">
          <div class="container-fluid px-0">
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNavDropdown" aria-controls="navbarNavDropdown" aria-expanded="false" aria-label="Toggle navigation">
              <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNavDropdown">
                <ul class="navbar-nav">
                  <li class="nav-item">
                    <div class="nav-link-container">
                      <a class="nav-link active mt-1 py-0" @click="changeSelectedNavItem(0)" aria-current="page" href="#">Home</a>
                      <div class="d-none d-lg-block" :class="{'selected-box' : isSelectedNavItem(0)}"></div>
                    </div>
                  </li>
                  <li v-if="user && user.accountType=='buyer'" class="nav-item">
                    <div class="nav-link-container">
                      <a class="nav-link mt-1 py-0" @click="changeSelectedNavItem(1)" aria-current="page" href="#">Restaurant</a>
                      <div class="d-none d-lg-block" :class="{'selected-box' : isSelectedNavItem(1)}"></div>
                    </div>
                  </li>
                  <li class="nav-item">
                    <div class="nav-link-container">
                      <a class="nav-link mt-1 py-0" @click="changeSelectedNavItem(2)" href="#">Orders</a>
                      <div class="d-none d-lg-block" :class="{'selected-box' : isSelectedNavItem(2)}"></div>
                    </div>
                  </li>
                  <li class="nav-item">
                    <div class="nav-link-container">
                      <a class="nav-link mt-1 py-0" @click="changeSelectedNavItem(3)" href="#">Customers</a>
                      <div class="d-none d-lg-block" :class="{'selected-box' : isSelectedNavItem(3)}"></div>
                    </div>
                  </li>
                  <li class="nav-item">
                    <div class="nav-link-container">
                      <a class="nav-link mt-1 py-0" @click="changeSelectedNavItem(3)" href="#">About us</a>
                      <div class="d-none d-lg-block" :class="{'selected-box' : isSelectedNavItem(3)}"></div>
                    </div>
                  </li>
                </ul>
            </div>
          </div>
          <div v-if="user">
            <div v-if="user.accountType == 'buyer'" class="d-none d-lg-block">
              <div class="homepage-user-info-container d-flex flex-row-reverse mt-2">
                <div>
                  <img src="../assets/icons/arrow.png" alt="arrow" class="arrow-pic mx-2">
                </div>
                <span>
                  {{user.name}} {{user.surname}}
                </span>
                <div class="image-cropper mx-2">
                  <img src="../assets/images/profile-picture.jpg" alt="avatar" class="profile-pic">
                </div>
                <div v-if="cart && !stickyCart" @click="navigateToCartView()" class="cart-container mb-1 me-2 d-flex align-items-center justify-content-center">
                  <div v-if="cart.articles.length > 0" class="dot cart-article-number d-flex justify-content-center align-items-center">
                    {{cart.articles.length}}
                  </div>
                  <img src="../assets/icons/cart.png" alt="shopping-cart" class="shopping-cart-pic mx-1">
                </div>
              </div> 
            </div>
          </div>
        </nav>
      </div>

      <!--Search for customers container-->
      <div class="container-fluid" id="search-container-customers">
        <div> 
          <h1 class="fw-bold mt-4"> 
          Search users
          </h1>
        </div>
        <div v-bind:class="{'sticky-search' : stickySearch}" > 
          <div class="search-wrapper" v-bind:class="{'sticky-search-wrapper' : stickySearch}">
            <div id="search-fields-wrapper">
              <div>
                <input type="text" class="form-control" placeholder="Name..." v-model="searchParameters[0]">
              </div>
              <div >
                <input type="text" class="form-control" placeholder="Surname..." v-model="searchParameters[1]">
              </div>
              <div >
                  <input type="text" class="form-control" placeholder="Username..." v-model="searchParameters[2]">
              </div>
            </div>
            <div>
              <button type="button" class="btn btn-danger regular-button" :disabled="searchParameters[0] == '' && searchParameters[1] == '' && searchParameters[2] == ''" @click="searchCustomers">Search</button>
            </div>
          </div>
        </div>
      </div>

      <div v-bind:class="{ 'sticky-empty-div' : stickySearch }"></div>

      <div class="d-flex flex-row">
        <div class="shrinking-margin"></div>
        <div class="center-div">
          <div class="search-body-container d-flex">
            <div id="big-filter-sort-container" class="big-filter-sort-container">
              <div class="d-none d-lg-block filter-sort-wrapper" id="filter-sort-wrapper" v-bind:class="{'filter-sort-wrapper-sticky': stickySearch}">
                <div v-bind:class="{'empty-filter-sort' : stickySearch}"></div>
                <!-- Filter container -->
                <div class="row filter-sort-container">
                  <h1 class="basic-title p-0">Buyer type</h1>
                  <div class="form-check">
                    <input class="form-check-input m-0" type="checkbox" :disabled="checkedCustomers[0] == 'showAll'"  value="showAll" v-model="checkedCustomers" v-on:change="filterCustomers('showAll')" id="flexCheckShowAll">
                    <label class="form-check-label" for="flexCheckShowAll">
                      Show all
                    </label>
                  </div>
                  <div class="form-check">
                    <input class="form-check-input m-0" type="checkbox" value="bronze" v-model="checkedCustomers" v-on:change="filterCustomers()" id="flexCheckBronze">
                    <label class="form-check-label" for="flexCheckBronze">
                      Bronze
                    </label>
                  </div>
                  <div class="form-check">
                    <input class="form-check-input m-0" type="checkbox" value="silver" v-model="checkedCustomers" v-on:change="filterCustomers()" id="flexCheckSilver">
                    <label class="form-check-label" for="flexCheckSilver">
                      Silver
                    </label>
                  </div>
                  <div class="form-check">
                    <input class="form-check-input m-0" type="checkbox" value="gold" v-model="checkedCustomers" v-on:change="filterCustomers()" id="flexCheckGold">
                    <label class="form-check-label" for="flexCheckGold">
                      Gold
                    </label>
                  </div>
                </div>
                <!-- Sort container -->
                <div class="row filter-sort-container">
                  <h1 class="basic-title pt-3 px-0">Sort by</h1>
                  <div class="row">
                    <div class="col-9 p-0">
                      <div class="form-check">
                        <input class="form-check-input m-0" type="radio" name="flexRadioDefault" value="usual" v-model="sortBy" id="flexRadioUsual">
                        <label class="form-check-label" for="flexRadioUsual">
                          Usual
                        </label>
                      </div>
                      <div class="form-check">
                        <input class="form-check-input m-0" type="radio" name="flexRadioDefault" value="name" v-model="sortBy" id="flexRadioName">
                        <label class="form-check-label" for="flexRadioName">
                          Name
                        </label>
                      </div>
                      <div class="form-check">
                        <input class="form-check-input m-0" type="radio" name="flexRadioDefault" value="surname" v-model="sortBy" id="flexRadioSurname">
                        <label class="form-check-label" for="flexRadioSurname">
                          Surname
                        </label>
                      </div>
                      <div class="form-check">
                        <input class="form-check-input m-0" type="radio" name="flexRadioDefault" value="username" v-model="sortBy" id="flexRadioUsername">
                        <label class="form-check-label" for="flexRadioUsername">
                          Username
                        </label>
                      </div>
                      <div class="form-check">
                        <input class="form-check-input m-0" type="radio" name="flexRadioDefault" value="points" v-model="sortBy" id="flexRadioPoints">
                        <label class="form-check-label" for="flexRadioPoints">
                          Points
                        </label>
                      </div>
                    </div>
                    <div class="col-3 p-0 sort-orders">
                      <div v-for="(sortOrder, index) in sortOrders">
                        <div class="row sort-order-container">
                          <div class="col px-0" style="text-align:end;">
                            <img @click="sortOrderChanged($event, index)" :src="sortOrder == 'Asc' ? '../assets/icons/ascending.png' : (sortOrder =='Desc' ? '../assets/icons/descending.png' : (sortOrder =='Z-A' ? '../assets/icons/ascending.png' : '../assets/icons/descending.png'))" class="img-fluid sort-icon">
                          </div>
                          <div class="col p-0">
                            <a class="nav-link" href="#" @click="sortOrderChanged($event, index)">{{sortOrder}}</a>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                </div>
              </div>
            <customer-search-results ref="child1" :customers-to-display="checkedCustomers" :sort-customers-by="sortBy" :sort-orders="sortOrders" :sort-orders-index="sortOrdersIndex" :search-parameters="searchParameters" :display-mode="displayMode"></customer-search-results>
            <!--div class="customers-body" id="customers-search-results-template" v-bind:class="{'restaurant-body-search-mode' : isSearchMode}">
              <div class="card restaurant-card d-flex flex-row" v-for="customer in displayCustomers" v-bind:key="customer.username">
                <img class="restaurant-img" v-bind:src="restaurant.bannerImage" alt="Customer image">
                <div class="d-flex flex-row restaurant-info">
                  <div class="d-flex flex-column">
                    <span class="row card-title pt-5  customers-title">Name & Surname</h5>
                    <span class="row customer-info-text">Maja Marijana</h5>
                    <a href="#" class="row">Block User</a>
                  </div>
                  <div class="d-flex flex-column">
                    <span class="row card-title pt-5 customers-title">Username</h5>
                    <span class="row customer-info-text">majam999</h5>
                  </div>
                  <div class="d-flex flex-column">
                    <span class="row card-title pt-5 customers-title">Role</h5>
                    <span class="row customer-info-text">Buyer</h5>
                  </div>
                  <div class="d-flex flex-column">
                    <span class="row card-title pt-5 customers-title">Type</h5>
                    <span class="row customer-info-text">Gold</h5>
                  </div>
                </div>
              </div>
            </div-->
          </div>
        </div>
        <div class="shrinking-margin"></div>
      </div>   
      <footer class="text-white" id="footer">
        <div class="container p-4 pb-0">
          <section class="footer-info d-flex flex-row mb-4">
            <div class="d-flex flex-column text">
              <div class="basic-title">
                Attributors
              </div>
              <span class="mb-3 mt-2">
                Aleksa Vujisić
              </span>
              <span>
                Nenad Bečanović
              </span>
            </div>
            <div class="d-flex flex-column">
              <div class="basic-title">
                Field of expertise
              </div>
              <span class="mb-3 mt-2">
                Frontend
              </span>
              <span>
                Backend
              </span>
            </div>
            <div class="d-flex flex-column">
              <div class="basic-title">
                Links
              </div>
              <div class="d-flex flex-row">
                <a class="btn btn-outline-light btn-circle m-1" target="_blank" href="https://www.linkedin.com/in/aleksavujisic/" @mouseover="changeToDarkLogo(0)" @mouseout="changeToLightLogo(0)" role="button"><img v-bind:src="socialMediaLogo[0]" class="link-image"></a>
                <a class="btn btn-outline-light btn-circle m-1" target="_blank" href="https://www.facebook.com/aleksa.vujisicc/" @mouseover="changeToDarkLogo(1)" @mouseout="changeToLightLogo(1)" role="button"><img v-bind:src="socialMediaLogo[1]" class="link-image"></a>
                <a class="btn btn-outline-light btn-circle m-1" target="_blank" href="https://www.instagram.com/aleksavujisic/" @mouseover="changeToDarkLogo(2)" @mouseout="changeToLightLogo(2)" role="button"><img v-bind:src="socialMediaLogo[2]" class="link-image"></a>
              </div>
              <div class="d-flex flex-row">
                <a class="btn btn-outline-light btn-circle m-1" target="_blank" href="https://www.linkedin.com/in/nenad-becanovic/" @mouseover="changeToDarkLogo(3)" @mouseout="changeToLightLogo(3)" role="button"><img v-bind:src="socialMediaLogo[3]" class="link-image"></a>
                <a class="btn btn-outline-light btn-circle m-1" target="_blank" href="https://www.facebook.com/nenad.becanovic.3" @mouseover="changeToDarkLogo(4)" @mouseout="changeToLightLogo(4)" role="button"><img v-bind:src="socialMediaLogo[4]" class="link-image"></a>
                <a class="btn btn-outline-light btn-circle m-1" target="_blank" href="https://www.instagram.com/nenad_becanovic/" @mouseover="changeToDarkLogo(5)" @mouseout="changeToLightLogo(5)" role="button"><img v-bind:src="socialMediaLogo[5]" class="link-image"></a>
              </div>
  
            </div>
            
          </section>
        </div>
        <div class="text-center p-3 copyright">
          © Copyright: Aleksa Vujisić, Nenad Bečanović
        </div>
      </footer>         
    </div>
  </body>

  <script type="text/x-template" id="restaurant-search-results-template">
    <div class="customers-body" v-bind:class="{'restaurant-body-search-mode' : isSearchMode}">
      <div class="card restaurant-card d-flex flex-row" v-for="customer in displayCustomers" v-bind:key="customer.username">
        <img class="restaurant-img" v-bind:src="restaurant.bannerImage" alt="Customer image">
        <div class="d-flex flex-row restaurant-info">
          <div class="d-flex flex-column">
            <span class="row card-title pt-5  customers-title">Name & Surname</h5>
            <span class="row customer-info-text">Maja Marijana</h5>
            <a href="#" class="row">Block User</a>
          </div>
          <div class="d-flex flex-column">
            <span class="row card-title pt-5 customers-title">Username</h5>
            <span class="row customer-info-text">majam999</h5>
          </div>
          <div class="d-flex flex-column">
            <span class="row card-title pt-5 customers-title">Role</h5>
            <span class="row customer-info-text">Buyer</h5>
          </div>
          <div class="d-flex flex-column">
            <span class="row card-title pt-5 customers-title">Type</h5>
            <span class="row customer-info-text">Gold</h5>
          </div>
        </div>
      </div>
    </div>
  </script>
  <script type="text/javascript" src="../js/scripts/managerCustomers.js"></script>
</html>