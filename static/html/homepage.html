<!DOCTYPE html>
<html>
  <head>
    <meta charset="ISO-8859-1">
    <title>Foodly</title>
    <link rel="shortcut icon" href="../assets/images/favicon.ico">
    <link rel="stylesheet" href="../js/bootstrap-5.0.1-dist/css/bootstrap.min.css"/>
    <link rel="stylesheet" href="../css/homepage.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;700&display=swap" rel="stylesheet">
    <script type="text/javascript" src="../js/bootstrap-5.0.1-dist/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../js/vue.js"></script>
    <script type="text/javascript" src="../js/axios.js"></script>
  </head>

  <body>
    <div id="homepage">
      <!--xxl screen visible, hidden on smaller than xxl-->
      <img class="img-fluid d-none d-xxl-block" src="../assets/components/landing-image-background.png" id="landing-image-background">
      <img class="img-fluid d-none d-xxl-block" src="../assets/components/landing-image-3d-elements.png" id="landing-image-3d-components">
      <!--lg and xl screen visible, hidden on xxl and wider and xxl and hidden on smaller than lg-->
      <img class="img-fluid px-0 d-xxl-none d-none d-lg-block" src="../assets/components/landing-image-background-xl.png">
      <!--md screen visible, hidden on lg and wider than lg and hidden on smaller than md-->
      <img class="img-fluid px-0 d-lg-none d-none d-md-block" src="../assets/components/landing-image-background-lg.png">
      <!--hidden on md and wider, visible on small screeens-->
      <div class="d-md-none" style="height: 750px; width:100%; clear:both;"></div>
      
      <!--Hero container-->
      <div class="container-fluid hero-container">
        <div class="row">
          <div class="col">
            <div class="container-fluid hero-header">
              <h1 class="display-1 fw-bold"> 
                Order fresh &<br>
                delicious food in<br>
                just <span id="red-hero-text">5 minutes!</span>
              </h1>
              <p class="display-6" id="hero-paragraph">What are you waiting?</p>
              <button type="button" class="btn btn-danger button-big mt-3">Order now</button>
            </div>
          </div>
          <div class="col-xxl-6">
            <img class="img-fluid d-none d-xxl-block" id="landing-image-plate" src="../assets/images/landing-image.png">
          </div>
        </div>
      </div>

      <!--Navigation container-->
      <div class="container-fluid navigation-container">
        <div class="container-fluid d-none d-xl-block px-0">
          <img src="../assets/icons/nav-logo-desktop.png" alt="Brand logo" width="211" height="83" id="logo-desktop">
        </div>
        <div class="container d-xl-none px-0">
          <img src="../assets/icons/nav-logo-mobile.png" alt="Brand logo" width="136" height="83" id="logo-mobile">
        </div>
        <nav class="navbar navbar-expand-xl navbar-light py-0">
          <div class="container-fluid">
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNavDropdown" aria-controls="navbarNavDropdown" aria-expanded="false" aria-label="Toggle navigation">
              <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNavDropdown">
              <ul class="navbar-nav">
                <li class="nav-item">
                  <a class="nav-link active py-0" aria-current="page" href="#">Home</a>
                </li>
                <li class="nav-item">
                  <a class="nav-link  py-0" href="#">Contact</a>
                </li>
                <li class="nav-item">
                  <a class="nav-link py-0" href="#">About</a>
                </li>
              </ul>
            </div>
          </div>
        </nav>
        <div class="d-none d-xxl-block">
          <div class="d-inline-flex sign-in-sign-up-container">
            <a class="nav-link mx-5" href="#">Sign in</a>
            <button type="button" class="btn btn-danger button-regular">Sign up</button>
          </div>
        </div>
      </div>

      <!--Search for restaurants container-->
      <div class="container-fluid px-0" id="search-container">
        <div class="row m-0"> 
          <h1 class="display-1 fw-bold mt-4"> 
          Where to eat?
          </h1>
        </div>
        <div v-bind:class="{ 'sticky-search' : stickySearch }">
          <div class="row search-fields g-4 m-0" >
            <div class="col-xl-3 mb-3 ps-0">
              <input type="text" class="form-control" placeholder="Restaurant name..." v-model="searchParameters[0]">
            </div>
            <div class="col-xl-3 mb-3 ps-0">
              <input type="text" class="form-control" placeholder="Location..." v-model="searchParameters[1]">
            </div>
            <div class="col-xl-3 ps-0">
              <div class="input-group mb-3">
                <select class="form-select" v-model="searchParameters[2]">
                  <option value="allCuisines">Cuisine...</option>
                  <option value="Barbecue">Barbecue</option>
                  <option value="Italian">Italian</option>
                  <option value="Chinese">Chinese</option>
                </select>
              </div>
            </div>
            <div class="col-xl-2 ps-0">
              <div class="input-group mb-3">
                <select class="form-select" v-model="searchParameters[3]">
                  <option value="allRatings">Rating...</option>
                  <option value="4-5">4-5 stars</option>
                  <option value="3-4">3-4 stars</option>
                  <option value="2-3">2-3 stars</option>
                  <option value="1-2">1-2 stars</option>
                </select>
              </div>
            </div>
            <div class="col-xl-1 mb-4 ps-0">
              <button type="button" class="btn btn-danger button-regular" :disabled="searchParameters[0] == '' && searchParameters[1] == '' && searchParameters[2] == 'allCuisines' && searchParameters[3]=='allRatings'" @click="searchRestaurants">Search</button>
            </div>
          </div>
        </div>
      </div>

      <div class="tall-div" v-bind:class="{ 'taller-div' : stickySearch }"></div>

      <!--Search results body-->
      <div class="container-fluid search-result-body">
        <div class="row">
          <div v-bind:class="{ 'col-4' : stickySearch }"></div>
          <div class="col-4" v-bind:class="{ 'sticky-filter-and-sort' : stickySearch }">

            <div class="row mb-5 ps-5 py-5 filter-container">
              <h1 class="basic-title px-0">Cuisine</h1>
              <div class="form-check">
                <input class="form-check-input" type="checkbox" :disabled="checkedCuisines[0] == 'showAll'"  value="showAll" v-model="checkedCuisines" v-on:change="filterCuisines('showAll')" id="flexCheckShowAll">
                <label class="form-check-label" for="flexCheckShowAll">
                  Show all
                </label>
              </div>
              <div class="form-check">
                <input class="form-check-input" type="checkbox" value="barbecue" v-model="checkedCuisines" v-on:change="filterCuisines" id="flexCheckBarbeque">
                <label class="form-check-label" for="flexCheckBarbeque">
                  Barbecue
                </label>
              </div>
              <div class="form-check">
                <input class="form-check-input" type="checkbox" value="italian" v-model="checkedCuisines" v-on:change="filterCuisines" id="flexCheckItalian">
                <label class="form-check-label" for="flexCheckItalian">
                  Italian
                </label>
              </div>
              <div class="form-check">
                <input class="form-check-input" type="checkbox" value="chinese" v-model="checkedCuisines" v-on:change="filterCuisines" id="flexCheckChinese">
                <label class="form-check-label" for="flexCheckChinese">
                  Chinese
                </label>
              </div>
              <h1 class="basic-title pt-3 px-0">Status</h1>
              <div class="form-check">
                <input class="form-check-input" type="checkbox" value="true" v-model="checkedOpenRestaurants" id="flexCheckStatus">
                <label class="form-check-label" for="flexCheckStatus">
                  Show only open restaurants
                </label>
              </div>
            </div>

            <div class="row mb-5 ps-5 pb-3 pt-3 sort-container">
              <h1 class="basic-title pt-3 px-0">Sort by</h1>
              <div class="row">
                <div class="col-9">
                  <div class="form-check">
                    <input class="form-check-input" type="radio" name="flexRadioDefault" value="usual" v-model="sortBy" id="flexRadioUsual">
                    <label class="form-check-label" for="flexRadioUsual">
                      Usual
                    </label>
                  </div>
                  <div class="form-check">
                    <input class="form-check-input" type="radio" name="flexRadioDefault" value="name" v-model="sortBy" id="flexRadioName">
                    <label class="form-check-label" for="flexRadioName">
                      Restaurant name
                    </label>
                  </div>
                  <div class="form-check">
                    <input class="form-check-input" type="radio" name="flexRadioDefault" value="location" v-model="sortBy" id="flexRadioLocation">
                    <label class="form-check-label" for="flexRadioLocation">
                      Nearest location
                    </label>
                  </div>
                  <div class="form-check">
                    <input class="form-check-input" type="radio" name="flexRadioDefault" value="rating" v-model="sortBy" id="flexRadioRating">
                    <label class="form-check-label" for="flexRadioRating">
                      Rating
                    </label>
                  </div>
                </div>
                <div class="col-3">
                  <div style="height: 41px;"></div>
                  <div v-for="(sortOrder, index) in sortOrders">
                    <div class="row sort-order-container">
                      <div class="col px-0 pt-1" style="text-align:end;">
                        <img :src="sortOrder == 'Asc' ? '../assets/icons/ascending.png' : '../assets/icons/descending.png'" class="img-fluid sort-icon">
                      </div>
                      <div class="col px-0">
                        <a class="nav-link" href="#" @click="sortOrderChanged($event, index)">{{sortOrder}}</a>
                      </div>
                    </div>
                  </div>
                  
                </div>
              </div>
            </div>

          </div>
          <div class="col-8 ps-5">
            <restaurant-search-results ref="child1" :cuisines-to-display="checkedCuisines" :open-restaurants-to-display="checkedOpenRestaurants" :sort-restaurants-by="sortBy" :sort-orders="sortOrders" :sort-orders-index="sortOrdersIndex" :search-parameters="searchParameters"></restaurant-search-results>
          </div>
        </div>
      </div>
      
    </div>
  </body>

  <script type="text/x-template" id="restaurant-search-results-template">
    <div>
      <div v-for="restaurant in filteredRestaurants" v-bind:key="restaurant.id">
        <div class="card restaurant-card mb-4">
          <div class="row g-0">
            <div class="col-md-4">
              <img class="img-fluid rounded-start restaurant-img" v-bind:src="restaurant.bannerImage" alt="Restaurant image">
            </div>
            <div class="col-md-8">
              <div class="card-body py-5 ps-5">
                <div class="row  mb-3">
                  <div class="col-1">
                    <img class="restaurant-logo" v-bind:src="restaurant.logo">
                  </div>
                  <div class="col">
                    <h5 class="card-title pt-2 ps-3 basic-title">{{restaurant.name}}</h5>
                  </div>
                </div>
                <div class="row">
                  <div class="col">
                    <p class="card-text mb-3 restaurant-cuisine">{{restaurant.restaurantType.charAt(0).toUpperCase() + restaurant.restaurantType.substring(1)}}</p>
                  </div>
                  <div class="col-2">
                    <p class="fw-bold rating-text">
                      <img class="location-pin-img" src="../assets/icons/star.png">
                        {{restaurant.rating}}
                    </p>
                  </div>
                </div>
                <p class="card-text restaurant-location"><img class="location-pin-img" src="../assets/icons/location-pin-red.png">Serbia, {{restaurant.location.address.city.name}}, {{restaurant.location.address.street}} {{restaurant.location.address.number}}, {{restaurant.location.address.city.postalCode}}</p>
                <a href="#" class="stretched-link"></a>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </script>
  <script type="text/javascript" src="../js/scripts/homepage.js"></script>
</html>